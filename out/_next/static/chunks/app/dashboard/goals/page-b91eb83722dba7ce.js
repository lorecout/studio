(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[402],{3960:(e,a,n)=>{Promise.resolve().then(n.bind(n,6804))},6785:(e,a,n)=>{"use strict";n.d(a,{A:()=>t});let t=(0,n(9946).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},6804:(e,a,n)=>{"use strict";n.d(a,{default:()=>Y});var t=n(5155),l=n(2115),s=n(2617),r=n(285),i=n(9103),o=n(6785),d=n(6695),c=n(6081),m=n(3655),u="Progress",[x,h]=(0,c.A)(u),[j,p]=x(u),f=l.forwardRef((e,a)=>{var n,l,s,r;let{__scopeProgress:i,value:o=null,max:d,getValueLabel:c=N,...u}=e;(d||0===d)&&!A(d)&&console.error((n="".concat(d),l="Progress","Invalid prop `max` of value `".concat(n,"` supplied to `").concat(l,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let x=A(d)?d:100;null===o||w(o,x)||console.error((s="".concat(o),r="Progress","Invalid prop `value` of value `".concat(s,"` supplied to `").concat(r,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let h=w(o,x)?o:null,p=b(h)?c(h,x):void 0;return(0,t.jsx)(j,{scope:i,value:h,max:x,children:(0,t.jsx)(m.sG.div,{"aria-valuemax":x,"aria-valuemin":0,"aria-valuenow":b(h)?h:void 0,"aria-valuetext":p,role:"progressbar","data-state":y(h,x),"data-value":null!=h?h:void 0,"data-max":x,...u,ref:a})})});f.displayName=u;var v="ProgressIndicator",g=l.forwardRef((e,a)=>{var n;let{__scopeProgress:l,...s}=e,r=p(v,l);return(0,t.jsx)(m.sG.div,{"data-state":y(r.value,r.max),"data-value":null!=(n=r.value)?n:void 0,"data-max":r.max,...s,ref:a})});function N(e,a){return"".concat(Math.round(e/a*100),"%")}function y(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function b(e){return"number"==typeof e}function A(e){return b(e)&&!isNaN(e)&&e>0}function w(e,a){return b(e)&&!isNaN(e)&&e<=a&&e>=0}g.displayName=v;var C=n(9434);let I=l.forwardRef((e,a)=>{let{className:n,value:l,...s}=e;return(0,t.jsx)(f,{ref:a,className:(0,C.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...s,children:(0,t.jsx)(g,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});I.displayName=f.displayName;var M=n(4838),S=n(4020),k=n(3717),D=n(2525);let E=(0,n(9946).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var R=n(6126);function O(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function V(e){let{goal:a,onEdit:n,onDelete:l,onAddAmount:s}=e,i=a.totalAmount>0?Math.min(a.currentAmount/a.totalAmount*100,100):0,o=new Date(a.deadline)<new Date&&i<100,c=i>=100;return(0,t.jsxs)(d.Zp,{className:"flex flex-col h-full shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,t.jsxs)(d.aR,{className:"flex flex-row items-start justify-between pb-4",children:[(0,t.jsx)(d.ZB,{className:"text-lg font-bold font-headline leading-tight",children:a.name}),(0,t.jsxs)(M.rI,{children:[(0,t.jsx)(M.ty,{asChild:!0,children:(0,t.jsx)(r.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,t.jsx)(S.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(M.SQ,{align:"end",children:[(0,t.jsxs)(M._2,{onClick:n,children:[(0,t.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Editar"]}),(0,t.jsxs)(M._2,{onClick:l,className:"text-destructive focus:text-destructive",children:[(0,t.jsx)(D.A,{className:"mr-2 h-4 w-4"}),"Excluir"]})]})]})]}),(0,t.jsx)(d.Wu,{className:"flex-grow",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-end mb-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-primary",children:O(a.currentAmount)}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["de ",O(a.totalAmount)]})]}),(0,t.jsx)(I,{value:i,className:"h-3"}),(0,t.jsx)("div",{className:"flex justify-between items-end mt-1",children:(0,t.jsxs)("span",{className:"text-xs font-semibold text-accent",children:[i.toFixed(0),"%"]})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Prazo: ",function(e){let a=new Date(e),n=6e4*a.getTimezoneOffset();return new Date(a.getTime()+n).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"})}(a.deadline)]}),c?(0,t.jsx)(R.E,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Conclu\xedda"}):o&&(0,t.jsx)(R.E,{variant:"destructive",children:"Atrasada"})]})]})}),(0,t.jsx)(d.wL,{children:(0,t.jsxs)(r.$,{onClick:s,className:"w-full",variant:"outline",disabled:c,children:[(0,t.jsx)(E,{className:"mr-2 h-4 w-4"}),"Adicionar Valor"]})})]})}var z=n(2177),P=n(3560),$=n(927),B=n(4165),_=n(7759),F=n(2523),J=n(4636),U=n(5511),q=n(9074),G=n(3008),L=n(4573);let T=$.Ik({name:$.Yj().min(1,{message:"O nome da meta \xe9 obrigat\xf3rio."}),totalAmount:$.au.number().min(1,{message:"O valor total deve ser maior que zero."}),initialAmount:$.au.number().min(0).optional().default(0),deadline:$.p6({required_error:"A data final \xe9 obrigat\xf3ria."})});function H(e){let{open:a,onOpenChange:n,onSave:s,goalToEdit:i}=e,o=(0,z.mN)({resolver:(0,P.u)(T),defaultValues:{name:"",totalAmount:0,initialAmount:0}});return(0,l.useEffect)(()=>{i?o.reset({name:i.name,totalAmount:i.totalAmount,initialAmount:i.currentAmount,deadline:new Date(i.deadline)}):o.reset({name:"",totalAmount:void 0,initialAmount:0,deadline:void 0})},[i,o,a]),(0,t.jsx)(B.lG,{open:a,onOpenChange:n,children:(0,t.jsxs)(B.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(B.c7,{children:[(0,t.jsx)(B.L3,{children:i?"Editar Meta":"Criar Nova Meta"}),(0,t.jsx)(B.rr,{children:i?"Atualize os detalhes da sua meta.":"Defina os detalhes da sua nova meta financeira."})]}),(0,t.jsx)(_.lV,{...o,children:(0,t.jsxs)("form",{onSubmit:o.handleSubmit(e=>{s({...e,deadline:e.deadline.toISOString()})}),className:"space-y-4 py-4",children:[(0,t.jsx)(_.zB,{control:o.control,name:"name",render:e=>{let{field:a}=e;return(0,t.jsxs)(_.eI,{children:[(0,t.jsx)(_.lR,{children:"Nome da Meta"}),(0,t.jsx)(_.MJ,{children:(0,t.jsx)(F.p,{placeholder:"Ex: F\xe9rias no Jap\xe3o",...a})}),(0,t.jsx)(_.C5,{})]})}}),(0,t.jsx)(_.zB,{control:o.control,name:"totalAmount",render:e=>{let{field:a}=e;return(0,t.jsxs)(_.eI,{children:[(0,t.jsx)(_.lR,{children:"Valor Total (R$)"}),(0,t.jsx)(_.MJ,{children:(0,t.jsx)(F.p,{type:"number",placeholder:"20000",...a})}),(0,t.jsx)(_.C5,{})]})}}),(0,t.jsx)(_.zB,{control:o.control,name:"initialAmount",render:e=>{let{field:a}=e;return(0,t.jsxs)(_.eI,{children:[(0,t.jsx)(_.lR,{children:"Valor Inicial (R$)"}),(0,t.jsx)(_.MJ,{children:(0,t.jsx)(F.p,{type:"number",placeholder:"0",...a,disabled:!!i})}),(0,t.jsx)(_.C5,{})]})}}),(0,t.jsx)(_.zB,{control:o.control,name:"deadline",render:e=>{let{field:a}=e;return(0,t.jsxs)(_.eI,{className:"flex flex-col",children:[(0,t.jsx)(_.lR,{children:"Prazo Final"}),(0,t.jsxs)(J.AM,{children:[(0,t.jsx)(J.Wv,{asChild:!0,children:(0,t.jsx)(_.MJ,{children:(0,t.jsxs)(r.$,{variant:"outline",className:(0,C.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?(0,G.GP)(a.value,"PPP",{locale:L.F}):(0,t.jsx)("span",{children:"Escolha uma data"}),(0,t.jsx)(q.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,t.jsx)(J.hl,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(U.V,{mode:"single",selected:a.value,onSelect:a.onChange,disabled:e=>e<new Date,initialFocus:!0})})]}),(0,t.jsx)(_.C5,{})]})}}),(0,t.jsxs)(B.Es,{children:[(0,t.jsx)(r.$,{type:"button",variant:"ghost",onClick:()=>n(!1),children:"Cancelar"}),(0,t.jsx)(r.$,{type:"submit",disabled:!o.formState.isDirty||!o.formState.isValid,children:"Salvar Meta"})]})]})})]})})}let Q=$.Ik({amount:$.au.number().positive({message:"O valor deve ser positivo."})});function W(e){let{open:a,onOpenChange:n,onSave:s,goalName:i}=e,o=(0,z.mN)({resolver:(0,P.u)(Q),defaultValues:{amount:void 0}});return(0,l.useEffect)(()=>{a&&o.reset()},[a,o]),(0,t.jsx)(B.lG,{open:a,onOpenChange:n,children:(0,t.jsxs)(B.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(B.c7,{children:[(0,t.jsx)(B.L3,{children:"Adicionar Valor \xe0 Meta"}),(0,t.jsxs)(B.rr,{children:['Quanto voc\xea quer adicionar para a meta "',i,'"?']})]}),(0,t.jsx)(_.lV,{...o,children:(0,t.jsxs)("form",{onSubmit:o.handleSubmit(e=>{s(e.amount)}),className:"space-y-4 py-4",children:[(0,t.jsx)(_.zB,{control:o.control,name:"amount",render:e=>{let{field:a}=e;return(0,t.jsxs)(_.eI,{children:[(0,t.jsx)(_.lR,{children:"Valor a Adicionar (R$)"}),(0,t.jsx)(_.MJ,{children:(0,t.jsx)(F.p,{type:"number",placeholder:"100,00",...a})}),(0,t.jsx)(_.C5,{})]})}}),(0,t.jsxs)(B.Es,{children:[(0,t.jsx)(r.$,{type:"button",variant:"ghost",onClick:()=>n(!1),children:"Cancelar"}),(0,t.jsx)(r.$,{type:"submit",disabled:!o.formState.isValid,children:"Adicionar"})]})]})})]})})}var Z=n(8856),X=n(8030);function Y(){let{user:e}=(0,X.A)(),[a,n,d]=(0,s.M)("realgoal-goals",[]),[c,m,u]=(0,s.M)("realgoal-transactions",[]),[x,h]=(0,l.useState)(!1),[j,p]=(0,l.useState)(!1),[f,v]=(0,l.useState)(null),g=(0,l.useMemo)(()=>e?a.filter(a=>a.userId===e.uid):[],[a,e]),N=()=>{v(null),h(!0)};return(0,t.jsxs)("div",{className:"container mx-auto py-6 px-4 md:px-6",children:[(0,t.jsxs)("header",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold font-headline",children:"Minhas Metas Financeiras"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Crie e acompanhe seu progresso para alcan\xe7ar seus sonhos."})]}),(0,t.jsxs)(r.$,{onClick:N,className:"w-full sm:w-auto",children:[(0,t.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Criar Nova Meta"]})]}),d||u?(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0].map((e,a)=>(0,t.jsx)(Z.E,{className:"h-56 w-full rounded-lg"},a))}):g.length>0?(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:g.map(e=>(0,t.jsx)(V,{goal:e,onEdit:()=>{v(e),h(!0)},onDelete:()=>{var t;return t=e.id,void n(a.filter(e=>e.id!==t))},onAddAmount:()=>{v(e),p(!0)}},e.id))}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-center py-16 px-4 border-2 border-dashed rounded-lg",children:[(0,t.jsx)("div",{className:"bg-primary/10 p-4 rounded-full mb-4",children:(0,t.jsx)(o.A,{className:"h-10 w-10 text-primary"})}),(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Nenhuma meta encontrada"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4 max-w-sm",children:"Comece a planejar seu futuro. Crie sua primeira meta financeira para realizar seus sonhos."}),(0,t.jsxs)(r.$,{onClick:N,children:[(0,t.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Criar Primeira Meta"]})]}),(0,t.jsx)(H,{open:x,onOpenChange:h,onSave:t=>{let l=null==e?void 0:e.uid;if(l){if(f)n(a.map(e=>e.id===f.id?{...e,name:t.name,totalAmount:t.totalAmount,deadline:t.deadline}:e));else{let e={id:crypto.randomUUID(),name:t.name,totalAmount:t.totalAmount,currentAmount:t.initialAmount||0,deadline:t.deadline,userId:l};n([...a,e]),t.initialAmount>0&&m([...c,{id:crypto.randomUUID(),description:"Valor inicial para a meta: ".concat(e.name),amount:t.initialAmount,category:"Investimentos/Metas",type:"expense",date:new Date().toISOString(),userId:l,status:"paid"}])}h(!1),v(null)}},goalToEdit:f}),(0,t.jsx)(W,{open:j,onOpenChange:p,onSave:t=>{f&&e&&(m([...c,{id:crypto.randomUUID(),description:"Adicionado \xe0 meta: ".concat(f.name),amount:t,category:"Investimentos/Metas",type:"expense",date:new Date().toISOString(),userId:e.uid,status:"paid"}]),n(a.map(e=>e.id===f.id?{...e,currentAmount:e.currentAmount+t}:e)),p(!1),v(null))},goalName:(null==f?void 0:f.name)||""})]})}}},e=>{e.O(0,[210,5,43,277,781,203,441,964,358],()=>e(e.s=3960)),_N_E=e.O()}]);